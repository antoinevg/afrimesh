<!--
 * Afrimesh: easy management for B.A.T.M.A.N. wireless mesh networks
 * Copyright (C) 2008-2009 Meraka Institute of the CSIR
 * All rights reserved.
 *  
 * This software is licensed as free software under the terms of the
 * New BSD License. See /LICENSE for more information.
-->

<h2>Plans</h2>

Discount <input value="60"/>minutes    <input value="R" />  <input value="10.00"/><br />
Value    <input value="180"/>minutes   <input value="R" />  <input value="25.00"/><br />
Premium  <input value="480"/>minutes   <input value="R" />  <input value="50.00"/><br />


<script type="text/javascript"> //<![CDATA[    
(function() {

  /** includes ------------------------------------------------------------ */


  /** construction -------------------------------------------------------- */
  ready = function() { // INJ 'ready' should be the only symbol we're exposing to the global namespace
    console.debug("loaded customers.prices.html");
    return unload;
  };

  function unload() {
    console.debug("unloaded customers.prices.html");
  };


  /** page logic ---------------------------------------------------------- */
  afrimesh.villagebus.uci.get.async(function (config) { // TODO - move to afrimesh.customers
      customer_plans = {};
      for (var section in config.afrimesh) {
        var plan = config.afrimesh[section];
        if (plan.type == "customer-plan") {  // TODO - design a cleaner solution for uci lists ? 
          plan.section = section;            //        Probably not do-able given that uci does not
          customer_plans[plan.name] = plan;  //        group entries logically but only in the order
        }                                    //        they appear in the config file.
      }
      populate_control(customer_plans);
    }, afrimesh.settings.hosts.dashboard_server, "afrimesh");


  function populate_control(customer_plans) {
    console.debug("Discount: " + dump_object(customer_plans.discount));
    console.debug("Value: "    + dump_object(customer_plans.value));
    console.debug("Premium: "  + dump_object(customer_plans.premium));

  }


  /** done ---------------------------------------------------------------- */
  console.debug("loaded customers.prices.js");

})();
//]]></script>


