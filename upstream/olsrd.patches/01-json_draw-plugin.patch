diff -r 0d61e1aed5b2 lib/json_draw/src/olsrd_json_draw.c
--- a/lib/json_draw/src/olsrd_json_draw.c	Wed Aug 12 17:11:21 2009 +0200
+++ b/lib/json_draw/src/olsrd_json_draw.c	Thu Aug 13 12:43:25 2009 +0200
@@ -71,7 +71,6 @@
 
 static int ipc_socket;
 
-int json_headers;
 
 char first;
 
@@ -120,7 +119,6 @@
 {
   /* Initial IPC value */
   ipc_socket = -1;
-  json_headers = -1;
 
   plugin_ipc_init();
 
@@ -236,8 +234,6 @@
   /* Register with olsrd */
   add_olsr_socket(ipc_socket, &ipc_action, NULL, NULL, SP_PR_READ);
 
-  if(print_json_headers) json_headers = 1; else json_headers = 0;
-
   return 1;
 }
 
@@ -279,11 +275,7 @@
     struct tc_entry *tc;
     struct ip_prefix_entry *hna;
 
-    /* Print tables to IPC socket (in JSON format) */
-    if(json_headers)
-	ipc_send_str(ipc_connection, "HTTP/1.0 200 OK\nContent-type: application/json\n\n");
-    else
-	ipc_send_str(ipc_connection, "[\n");
+    ipc_send_str(ipc_connection, "HTTP/1.0 200 OK\nContent-type: application/json\n\n[\n");
 
     /* Neighbors */
     OLSR_FOR_ALL_NBR_ENTRIES(neighbor_table_tmp) {
@@ -322,7 +314,7 @@
     res = 1;
   }
 
-  if (ipc_socket == -1 || json_headers == -1) {
+  if (ipc_socket == -1) {
     plugin_ipc_init();
   }
   return res;
diff -r 0d61e1aed5b2 lib/json_draw/src/olsrd_plugin.c
--- a/lib/json_draw/src/olsrd_plugin.c	Wed Aug 12 17:11:21 2009 +0200
+++ b/lib/json_draw/src/olsrd_plugin.c	Thu Aug 13 12:43:25 2009 +0200
@@ -63,7 +63,6 @@
 
 union olsr_ip_addr ipc_accept_ip;
 int ipc_port;
-int print_json_headers;
 
 static void my_init(void) __attribute__ ((constructor));
 static void my_fini(void) __attribute__ ((destructor));
@@ -79,9 +78,8 @@
   OLSR_INFO(LOG_PLUGINS, "%s\n", MOD_DESC);
 
   /* defaults for parameters */
-  ipc_port = 2004;
+  ipc_port = 2005;
   ipc_accept_ip.v4.s_addr = htonl(INADDR_LOOPBACK);
-  print_json_headers = 0;
 }
 
 
@@ -111,7 +109,6 @@
 static const struct olsrd_plugin_parameters plugin_parameters[] = {
   {.name = "port",.set_plugin_parameter = &set_plugin_port,.data = &ipc_port},
   {.name = "accept",.set_plugin_parameter = &set_plugin_ipaddress,.data = &ipc_accept_ip},
-  {.name = "PrintJSONHeaders",.set_plugin_parameter = &set_plugin_int,.data = &print_json_headers}
 };
 
 void
