<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--
 * Afrimesh: easy management for B.A.T.M.A.N. wireless mesh networks
 * Copyright (C) 2008-2009 Meraka Institute of the CSIR
 * All rights reserved.
 *  
 * This software is licensed as free software under the terms of the
 * New BSD License. See /LICENSE for more information.
-->
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style/reset.css"> 
    <link rel="stylesheet" type="text/css" href="style/default.css"> 
    <link rel="stylesheet" type="text/css" href="style/drawers.css"> 
    <link rel="stylesheet" type="text/css" href="style/map.css"> 
    <link rel="stylesheet" type="text/css" href="style/widgets.css"> 


    <!-- includes ---------------------------------------------------------- -->
    <!-- jquery -->
    <!-- script type="text/javascript" src="http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js"></script -->
    <script type="text/javascript" src="javascript/jquery/jquery.js"></script>
    <script type="text/javascript" src="javascript/jquery/jquery.json.js"></script>
    <!-- script type="text/javascript" src="javascript/jquery/jquery.ui.js"></script -->
    <script type="text/javascript" src="javascript/jquery/jquery.corner.js"></script> <!-- http://jrc.meerbox.nl/ - TODO deprecate -->
                                                                                      <!-- also look at: http://www.malsup.com/jquery/corner/ -->
                                                                                      <!--               http://www.ruzee.com/files/shadedborder/ -->
    <!-- afrimesh -->
    <script type="text/javascript" src="javascript/afrimesh.utilities.js"></script>
    <script type="text/javascript" src="javascript/afrimesh.platform.js"></script>
    <script type="text/javascript" src="javascript/afrimesh.villagebus.js"></script>
    <script type="text/javascript" src="javascript/afrimesh.network.js"></script>
    <script type="text/javascript" src="javascript/afrimesh.customers.js"></script>
    <script type="text/javascript" src="javascript/afrimesh.js"></script -->

    <!-- One-time initialization/bootstrap ------------------------------- -->
    <script type="text/javascript">  //<![CDATA[    
      $(document).ready(function() {

        /*$.ajax({ url: "javascript/afrimesh.platform.js",
          dataType: "script",
          async: false,
          success: function(js) { console.debug("finished loading"); } });*/

        /** menu drawers */
        $("li.drawer h2:not(.open)").next().hide();
        $("h2.drawer-handle").mouseover(function () {
          $("h2.drawer-handle.open").removeClass("open").next().hide();
          $(this).addClass("open").next().show(); 
        });

        console.debug("$(document).ready() -------------------- start");

        /** global error handler for Ajax requests */
        $(document).ajaxError(function(ajax, response, request) {
            console.error("AJAX: " + ajax.type);
            console.error("RESPONSE: " + response.status + " " + response.statusText + "\n" + response.responseText);
            console.error("REQUEST:  " + request.data);
          });


        /** populate DOM references to afrimesh.settings */
        var elements = $("[id*=afrimesh|settings]");
        elements.each(function(element) {
            //$(elements[element]).html("&lt;" + elements[element].id + "&gt;");
            //$(elements[element]).html(afrimesh.Q(elements[element].id) + "");
            $(elements[element]).html(Q(afrimesh, elements[element].id) + "");
          });

        /** attach actions to menu */
        // UDE it looks like we're ending up with multiple instances of modules
        //     need to change the code so it either unloads or only ever loads
        //     a module once
        // UDE as the code currently stands we cannot load a module into the
        //     browser as a standalone
        var unloader = function() {  };
        function add_menu_item(section, item) {
          $("div#menu li#" + section + " a#" + item).click(function(event) {
              unloader(); 
              $("div#content").hide();
              $("div#content").load("modules/" + section + "." + item + ".html", function(page) { 
                  $("div#content").fadeIn("slow"); 
                  unloader = ready(); // UDE fades mess with load completion and require a ready() method :(
                });
              return false;
            });
        };
        add_menu_item("customers", "recharge");
        add_menu_item("customers", "manage");
        add_menu_item("customers", "plans");
        add_menu_item("customers", "status");
        add_menu_item("network",   "map");
        add_menu_item("network",   "health");

        /** set default page */
        $("div#menu li#network a#map").click();

        /** loading complete, we can now remove our message */
        $("#message-loading").html("");

        console.debug("$(document).ready() -------------------- end");
      });

     //]]></script>
  </head>
  <body>

    <div id="message-loading" style="text-align:center;">please wait...</div> <!-- TODO -->

    <div id="container">

      <div id="header">
        <h1>
          <span style="color:lightbrown; float:left;" 
                id="afrimesh|settings|network_name"></span>
          <span style="color:lightgray; float:right;"
                id="afrimesh|settings|hosts|dashboard_server"></span>
          <div style="clear: both;"></div>
        </h1>
      </div> <!-- /header -->

      <div id="menu">
        <div class="drawers-wrapper">
          <div class="drawers-top"></div>
          <ul class="drawers">

            <li id="customers" class="drawer">
              <h2 class="drawer-handle">Customers</h2>
              <ul> 
                <li><a href="#" id="recharge">Recharge</a></li>
                <li><a href="#" id="manage">Manage</a></li>
                <li><a href="#" id="plans">Plans</a></li>
                <li><a href="#" id="status">Status</a></li>
              </ul>
            </li>

            <li id="network" class="drawer">
              <h2 class="drawer-handle">Network</h2>
              <ul> 
                <li><a href="#" id="map">Map</a></li>
                <li><a href="#" id="health">Health</a></li>
              </ul>
            </li>

            <li id="settings" class="drawer">
              <h2 class="drawer-handle">Settings</h2> 
              <ul> 
                <li><a href="#" id="mesh" class="todo">Mesh</a></li>
                <li><a href="#" id="internet" class="todo">Internet</a></li>
              </ul>
            </li>

            <!-- li id="install" class="drawer">
              <h2 class="drawer-handle">Install</h2> 
              <ul> 
                <li><a href="#" id="dashboard" class="todo">Dashboard</a></li>
                <li><a href="#" id="router" class="todo">Router</a></li>
              </ul>
            </li -->

          </ul>
          <div class="drawers-bottom"></div>
        </div>
      </div> <!-- /menu -->

      <div id="content">
        please wait a moment...
      </div> <!-- /content -->

      <div id="footer">
<!--
        <h3>Important Routers</h3>
-->
      </div> <!-- /footer -->

    <div id="console"></div> <!-- TODO -->

    </div> <!-- /container -->
      
  </body>
</html>


