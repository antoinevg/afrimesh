<!--
 * Afrimesh: easy management for B.A.T.M.A.N. wireless mesh networks
 * Copyright (C) 2008-2009 Meraka Institute of the CSIR
 * All rights reserved.
 *  
 * This software is licensed as free software under the terms of the
 * New BSD License. See /LICENSE for more information.
-->

<style>
  div#accounts-manage input.blur {
    color : gray;
  }
</style>
<div id="accounts-manage">

  <!-- search control -->
  <input type="text" 
         style="width:400px; height:30px; padding-left:10px;"
         name="seach" id="search" 
         value="" title="Search on account info ..." />
  &nbsp;
  <span id="account-create" class="round button">New Account</span>
  <hr />

  <!-- account list -->
  <div class="scrollview" style="top:5.0em;">

    <!-- account editor -->
    <div id="editor-template" class="round-small editor">
      <input type="text" title="first name"/>
      <input type="text" title="last name"/>
      <input type="text" title="email"/><br/>
      <input type="text" title="street address"/><br/>
      <input type="text" title="suburb"/><br/>
      <input type="text" title="city"/><br/>
    </div>


    <div id="accountlist" class="accounts">
      <div id="account-template" style="display:none;"> 
      <!-- div id="account-template" class="account" --> 
        <span class="expand">+</span>
        <span class="name">Antoine van Gelder</span> 
        <span class="device">10.0.0.2</span>
        <span class="voipnumber">42</span>
        <!-- span class="address">33 Riverside Drive, Kommetjie</span>
             <span class="balance"></span>
             <span class="contact">antoine@7degrees.co.za</span -->
      </div>
    </div>
  </div>

</div> <!-- #accounts-manage -->



<script type="text/javascript"> //<![CDATA[    
(function() {

  /** includes ---------------------------------------------------------- */
  /* often a good idea:  load("modules/accounts.manage.js"); *;/


  /** construction ------------------------------------------------------ */
  ready = function() { // INJ 'ready' should be the only symbol we're exposing to the global namespace
    /* often a good place to do this: populate_control(); */
    console.debug("loaded accounts.manage.html");

    /* set up search box */
    $('input[title!=""]').hint();    
    $("div#accounts-manage input#search").bind("keyup", function(event) {
        if (this.value == "") { 
          return $("div.account").show();
        }
        var filter = this.value;
        $("div.account:not(:contains(" + filter + "))").hide();
        $("div.account:contains(" + filter + ")").show();
	      if (event.keyCode != 13) return true;
        return false;
      });


    /* set up new account button */
    $("#account-create").click(function() {
        $("#editor-template").show();
        
      });


    /* load data */   
    var names = [ "antoine", "Bob", "Joe Smith", "Janet Smith" ];
    for (i = 0; i < 50; i++) {
      // clone account template
      var clone = $("#account-template").clone()
                                        .addClass("account")
                                        .attr("id", i)
                                        //.attr("name", names[i % names.length].toUpperCase())
                                        .appendTo("#accountlist").show();
      // add data for account
      clone.find(".name").html(names[i % names.length]);
      clone.find(".voipnumber").html(i);
      clone.find(".device").html("10.0.0." + i);
      //clone.find(".uptime").html(pretty_seconds(device.uptime));
      //clone.find(".traffic").html(pretty_bytes(device.bytes.tx + device.bytes.rx));
      clone.click(function() {
          $(this).unbind();
          console.log("Editing account: " + $(this).find(".name").html());
          var clone = $("#editor-template").clone()
                                           .attr("id", "");
          //clone.insertAfter(this).show();
          clone.appendTo($(this).find(".name")).show();
          $(this).find(".name").css("background", "#eee");
          $(this).find(".name").addClass("round-small");
          $(this).find(".expand").html("-");
          $('input[title!=""]').hint();    
        });
    }


    return unload;
  };

  function unload() {
    console.debug("unloaded accounts.manage.html");
  };


  /** populate control -------------------------------------------------- */
  function populate_accounts(accounts) {
  };


  /** done -------------------------------------------------------------- */
  console.debug("loaded accounts.manage.js");
 
})();
//]]></script>


